# Maicraft Next 配置模板文件
# 复制此文件为 config.toml 并根据需要修改配置

[app]
# 应用基础配置
name = "maicraft-next"
version = "0.1.0"
debug = false
data_dir = "./data"

[logging]
# 日志配置
level = "info"           # error, warn, info, debug
console = true
file = true
colors = true            # 启用控制台彩色输出
max_file_size = 10485760 # 10MB
max_files = 5
log_dir = "./logs"

[minecraft]
# Minecraft 服务器连接配置
host = "localhost"
port = 25565
username = "MaicraftBot"
password = ""            # 留空为离线模式
auth = "offline"         # offline, mojang, microsoft

# 重连配置
reconnect = true
reconnect_delay = 5000     # 毫秒
max_reconnect_attempts = 5

# 网络配置
timeout = 30000   # 毫秒
keep_alive = true

[agent]
# AI 代理配置
model_name = "gpt-4"
max_tokens = 4096
temperature = 0.7
decision_timeout = 30000 # 毫秒
goal = "生存10天"           # AI代理的目标

# 行为限制
max_actions_per_minute = 30
safe_mode = true
allow_destructive_actions = false

# 记忆配置
memory_limit = 1000          # 最大记忆条目数
save_memory_interval = 60000 # 毫秒

[llm]
# LLM 服务配置
default_provider = "openai" # openai, anthropic, azure

# OpenAI 配置
[llm.openai]
enabled = true
api_key = ""                           # 在此处填入你的 OpenAI API key
base_url = "https://api.openai.com/v1"
model = "gpt-4"
max_tokens = 4096
temperature = 0.7
timeout = 30000                        # 毫秒

# Azure OpenAI 配置
[llm.azure]
enabled = false
api_key = ""                       # Azure API key
endpoint = ""                      # Azure endpoint URL
deployment_name = ""               # Azure deployment name
api_version = "2023-12-01-preview"
model = "gpt-4"
max_tokens = 4096
temperature = 0.7
timeout = 30000

# Anthropic Claude 配置
[llm.anthropic]
enabled = false
api_key = ""                       # Anthropic API key
model = "claude-3-sonnet-20240229"
max_tokens = 4096
temperature = 0.7
timeout = 30000

# 重试配置
[llm.retry]
max_attempts = 3
initial_delay = 1000   # 毫秒
max_delay = 30000      # 毫秒
backoff_multiplier = 2

# 用量统计配置
[llm.usage_tracking]
enabled = true
persist_interval = 60000               # 毫秒
stats_file = "./data/usage_stats.json"
daily_limit_warning = 0.8              # 80% 时警告
monthly_budget_warning = 0.8           # 80% 时警告

# 价格配置 (USD per 1K tokens)
[llm.pricing]
# OpenAI 定价
[llm.pricing.openai]
gpt_4_input = 0.03
gpt_4_output = 0.06
gpt_35_turbo_input = 0.0015
gpt_35_turbo_output = 0.002
gpt_4_turbo_input = 0.01
gpt_4_turbo_output = 0.03

# Anthropic 定价
[llm.pricing.anthropic]
claude_3_opus_input = 0.015
claude_3_opus_output = 0.075
claude_3_sonnet_input = 0.003
claude_3_sonnet_output = 0.015
claude_3_haiku_input = 0.00025
claude_3_haiku_output = 0.00125

# Azure 定价 (通常与 OpenAI 相同)
[llm.pricing.azure]
gpt_4_input = 0.03
gpt_4_output = 0.06
gpt_35_turbo_input = 0.0015
gpt_35_turbo_output = 0.002

[plugins]
# 插件配置
enabled = ["armor-manager", "pathfinder", "collectblock", "pvp", "tool"]

[plugins.armor-manager]
auto_equip = true
prefer_protection = true

[plugins.pathfinder]
timeout = 10000
search_radius = 100

[plugins.collectblock]
max_distance = 16
auto_collect = true

[plugins.pvp]
enabled = false
auto_attack = false

[plugins.tool]
auto_switch = true
prefer_efficiency = true

[api]
# API 服务配置
enabled = true

[api.websocket]
# WebSocket 服务配置
enabled = true
host = "0.0.0.0"
port = 25114               # WebSocket 服务器端口
path = "/ws"               # WebSocket 路径
max_connections = 10       # 最大连接数
heartbeat_interval = 30000 # 心跳间隔（毫秒）
connection_timeout = 60000 # 连接超时（毫秒）

# CORS 配置
[api.cors]
enabled = true
allow_origins = ["*"]
allow_credentials = false
allow_methods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
allow_headers = ["*"]

[advanced]
# 高级配置
hot_reload = true
config_backup = true
backup_count = 5

# 性能配置
tick_rate = 20            # 游戏刻率
max_concurrent_tasks = 10

# 安全配置
allow_operator_commands = false
restricted_items = []           # 禁用的物品ID列表
